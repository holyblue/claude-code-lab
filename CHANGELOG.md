# Changelog

æœ¬æª”æ¡ˆè¨˜éŒ„å°ˆæ¡ˆçš„æ‰€æœ‰é‡è¦è®Šæ›´ï¼Œéµå¾ª [claude.md](./claude.md) è¦ç¯„ã€‚

## æ ¼å¼èªªæ˜
- **æ—¥æœŸ** - åŠŸèƒ½åç¨±
- âœ… å·²å®Œæˆ - å¯¦ä½œå…§å®¹
- ğŸ“Š æ¸¬è©¦æˆæœ - æ¸¬è©¦æ•¸é‡ã€è¦†è“‹ç‡
- ğŸ”‘ é—œéµæ¥­å‹™è¦å‰‡é©—è­‰ - é©—è­‰çš„æ¥­å‹™é‚è¼¯
- ğŸ“ è®Šæ›´æª”æ¡ˆ - æ–°å¢/ä¿®æ”¹çš„æª”æ¡ˆåˆ—è¡¨
- ğŸ“ å‚™è¨» - ç›¸é—œèªªæ˜

---

## [2025-11-14] - å®Œæˆå…¨éƒ¨ 6 å€‹è³‡æ–™åº«æ¨¡å‹ï¼ˆTDDï¼‰

### âœ… å·²å®Œæˆ

**TDD Cycle 2 å®Œæˆï¼š**
- âœ… Red: æ’°å¯« TimeEntry, WorkTemplate, Setting æ¸¬è©¦
- âœ… Green: å¯¦ä½œå…¨éƒ¨ 3 å€‹æ¨¡å‹ï¼ˆ13 å€‹æ–°æ¸¬è©¦ï¼Œå…¨éƒ¨é€šéï¼‰
- âœ… Total: 30 å€‹æ¸¬è©¦é€šéï¼Œ82% è¦†è“‹ç‡ï¼ˆè¶…é 80% ç›®æ¨™ï¼‰

**æ¨¡å‹å¯¦ä½œå®Œæˆï¼ˆ6/6ï¼‰ï¼š**

1. **Project** (å°ˆæ¡ˆ) - 9 å€‹æ¸¬è©¦ï¼Œ95% è¦†è“‹ç‡
   - æ ¸å¿ƒæ¬„ä½ï¼šcode, requirement_code, name, approved_man_days
   - æ¥­å‹™é‚è¼¯ï¼šè»Ÿåˆªé™¤ã€ä»£ç¢¼å”¯ä¸€æ€§ã€å¤–éµé—œè¯

2. **AccountGroup** (å¸³çµ„) - 3 å€‹æ¸¬è©¦ï¼Œ89% è¦†è“‹ç‡
   - æ ¸å¿ƒæ¬„ä½ï¼šcode, name, is_default
   - å”¯ä¸€ç´„æŸï¼š(code, name) çµ„åˆ

3. **WorkCategory** (å·¥ä½œé¡åˆ¥) - 5 å€‹æ¸¬è©¦ï¼Œ89% è¦†è“‹ç‡
   - æ ¸å¿ƒæ¬„ä½ï¼šcode, name, deduct_approved_hours
   - æ¥­å‹™é‚è¼¯ï¼šA08 å•†æ¨¡/I07 ä¼‘å‡ä¸æ‰£æŠµæ ¸å®šå·¥æ™‚

4. **TimeEntry** (å·¥æ™‚è¨˜éŒ„) - 6 å€‹æ¸¬è©¦ï¼Œ95% è¦†è“‹ç‡ â­ æ ¸å¿ƒæ¨¡å‹
   - æ ¸å¿ƒæ¬„ä½ï¼šdate, project_id, hours, description
   - åŠŸèƒ½ï¼šæ”¯æ´ Markdownã€display_orderã€account_item
   - é©—è­‰ï¼šæ”¯æ´ 0.5 å°æ™‚å¢é‡ï¼ˆ0.5-12.0 å°æ™‚ï¼‰

5. **WorkTemplate** (å·¥ä½œç¯„æœ¬) - 3 å€‹æ¸¬è©¦ï¼Œ94% è¦†è“‹ç‡
   - æ ¸å¿ƒæ¬„ä½ï¼šname, default_hours, description_template
   - ç”¨é€”ï¼šå¿«é€Ÿå»ºç«‹é‡è¤‡æ€§å·¥æ™‚è¨˜éŒ„

6. **Setting** (ç³»çµ±è¨­å®š) - 4 å€‹æ¸¬è©¦ï¼Œ91% è¦†è“‹ç‡
   - æ ¸å¿ƒæ¬„ä½ï¼škey (å”¯ä¸€), value
   - ç”¨é€”ï¼šç³»çµ±é…ç½®ï¼ˆèªè¨€ã€æ™‚å€ã€å·¥æ™‚æ¨™æº–ï¼‰

**è³‡æ–™åº«åˆå§‹åŒ–ï¼š**
- å‰µå»º `init_db.py` è…³æœ¬
- ç¨®å­è³‡æ–™ï¼š2 å€‹å¸³çµ„ã€4 å€‹å·¥ä½œé¡åˆ¥ã€8 å€‹ç³»çµ±è¨­å®š
- æ¸¬è©¦æˆåŠŸï¼šæ‰€æœ‰è¡¨æ ¼å‰µå»ºï¼Œç¨®å­è³‡æ–™æ’å…¥

### ğŸ“Š æ¸¬è©¦æˆæœ
- **ç¸½æ¸¬è©¦æ•¸**ï¼š30 å€‹ï¼ˆå…¨éƒ¨é€šé âœ…ï¼‰
- **è¦†è“‹ç‡**ï¼š82%ï¼ˆè¶…é 80% è¦æ±‚ï¼‰
- **æ¨¡å‹è¦†è“‹ç‡**ï¼š89-95%ï¼ˆå„ªç§€ï¼‰
- **æ¸¬è©¦é¡å‹**ï¼šå–®å…ƒæ¸¬è©¦ã€é—œè¯æ¸¬è©¦ã€ç´„æŸæ¸¬è©¦

### ğŸ”‘ é—œéµæ¥­å‹™è¦å‰‡é©—è­‰
- âœ… å°ˆæ¡ˆä»£ç¢¼å”¯ä¸€æ€§
- âœ… æ ¸å®šäººå¤©è¿½è¹¤ï¼ˆ1 äººå¤© = 7.5 å°æ™‚ï¼‰
- âœ… A08 å•†æ¨¡ä¸æ‰£æŠµæ ¸å®šå·¥æ™‚ï¼ˆé‡è¦ï¼‰
- âœ… I07 ä¼‘å‡ä¸æ‰£æŠµæ ¸å®šå·¥æ™‚
- âœ… å·¥æ™‚è¨˜éŒ„æ”¯æ´ 0.5 å°æ™‚å¢é‡
- âœ… è¨­å®š key å”¯ä¸€æ€§
- âœ… è»Ÿåˆªé™¤æ©Ÿåˆ¶ï¼ˆdeleted_at æ™‚é–“æˆ³è¨˜ï¼‰
- âœ… æ‰€æœ‰æ¨¡å‹è‡ªå‹•æ™‚é–“æˆ³è¨˜

### ğŸ“ è®Šæ›´æª”æ¡ˆ
- `backend/app/init_db.py` - æ–°å¢è³‡æ–™åº«åˆå§‹åŒ–è…³æœ¬
- `backend/app/models/__init__.py` - æ›´æ–°æ¨¡å‹åŒ¯å‡º
- `backend/app/models/setting.py` - æ–°å¢è¨­å®šæ¨¡å‹
- `backend/app/models/time_entry.py` - æ–°å¢å·¥æ™‚è¨˜éŒ„æ¨¡å‹
- `backend/app/models/work_template.py` - æ–°å¢å·¥ä½œç¯„æœ¬æ¨¡å‹
- `backend/tests/unit/test_models.py` - æ–°å¢ 270+ è¡Œæ¸¬è©¦ç¨‹å¼ç¢¼

### ğŸ“ å‚™è¨»
- è³‡æ–™åº«æ¶æ§‹å®Œæ•´ï¼š6 å€‹è¡¨æ ¼ï¼Œé©ç•¶çš„é—œè¯èˆ‡ç´¢å¼•
- å¤–éµç´„æŸæ­£ç¢ºå®šç¾©
- å¿…è¦çš„å”¯ä¸€ç´„æŸ
- å¸¸æŸ¥è©¢æ¬„ä½å»ºç«‹ç´¢å¼•ï¼ˆdate, project_idï¼‰
- **ä¸‹ä¸€éšæ®µ**ï¼šPydantic Schemas èˆ‡ API ç«¯é»

**Git Commit:** `c027af1` - Complete all 6 database models with TDD (30 tests passing, 82% coverage)

---

## [2025-11-14] - å¯¦ä½œå‰ 3 å€‹è³‡æ–™åº«æ¨¡å‹ï¼ˆTDDï¼‰

### âœ… å·²å®Œæˆ

**TDD Cycle 1 å®Œæˆï¼š**
- âœ… Red: æ’°å¯« Project, AccountGroup, WorkCategory æ¸¬è©¦
- âœ… Green: å¯¦ä½œå…¨éƒ¨ 3 å€‹æ¨¡å‹
- âœ… Refactor: å„ªåŒ–ç¨‹å¼ç¢¼çµæ§‹

**æ¨¡å‹å¯¦ä½œï¼ˆ3/6ï¼‰ï¼š**
1. **Project** - å°ˆæ¡ˆæ¨¡å‹ï¼ˆ9 å€‹æ¸¬è©¦ï¼‰
2. **AccountGroup** - å¸³çµ„æ¨¡å‹ï¼ˆ3 å€‹æ¸¬è©¦ï¼‰
3. **WorkCategory** - å·¥ä½œé¡åˆ¥æ¨¡å‹ï¼ˆ5 å€‹æ¸¬è©¦ï¼‰

### ğŸ“Š æ¸¬è©¦æˆæœ
- **æ¸¬è©¦æ•¸é‡**ï¼š17 å€‹æ¸¬è©¦é€šé
- **è¦†è“‹ç‡**ï¼šç´„ 75%
- **TDD ç‹€æ…‹**ï¼šRed â†’ Green â†’ Refactor âœ…

### ğŸ”‘ é—œéµæ¥­å‹™è¦å‰‡é©—è­‰
- âœ… å°ˆæ¡ˆä»£ç¢¼å”¯ä¸€æ€§
- âœ… å¸³çµ„ (code, name) çµ„åˆå”¯ä¸€æ€§
- âœ… å·¥ä½œé¡åˆ¥æ‰£æŠµæ ¸å®šå·¥æ™‚é‚è¼¯

### ğŸ“ è®Šæ›´æª”æ¡ˆ
- `backend/app/models/project.py` - æ–°å¢å°ˆæ¡ˆæ¨¡å‹
- `backend/app/models/account_group.py` - æ–°å¢å¸³çµ„æ¨¡å‹
- `backend/app/models/work_category.py` - æ–°å¢å·¥ä½œé¡åˆ¥æ¨¡å‹
- `backend/tests/unit/test_models.py` - æ–°å¢æ¨¡å‹æ¸¬è©¦ï¼ˆéƒ¨åˆ†ï¼‰

**Git Commit:** `c655ce3` - Implement first 3 database models with TDD (Red-Green cycle)

---

## [2025-11-14] - åˆå§‹åŒ–å¾Œç«¯å°ˆæ¡ˆèˆ‡ TDD/BDD æ¡†æ¶

### âœ… å·²å®Œæˆ

**å°ˆæ¡ˆçµæ§‹ï¼š**
- å»ºç«‹å®Œæ•´çš„ backend ç›®éŒ„çµæ§‹
- é…ç½® pytest èˆ‡ pytest-bdd æ¸¬è©¦æ¡†æ¶
- å‰µå»º 5 å€‹ Gherkin feature æª”æ¡ˆ
- è¨­å®šåŸºç¤é…ç½®æª”æ¡ˆï¼ˆconfig.py, database.pyï¼‰

**æ¸¬è©¦æ¡†æ¶ï¼š**
- pytest.ini é…ç½®å®Œæˆ
- conftest.py fixture è¨­å®š
- æ¸¬è©¦ç›®éŒ„çµæ§‹ï¼šfeatures/, step_defs/, unit/, integration/

**Gherkin Feature æª”æ¡ˆï¼ˆ5 å€‹ï¼‰ï¼š**
1. `work_hours.feature` - æ¯æ—¥å·¥æ™‚è¨˜éŒ„èˆ‡é©—è­‰
2. `overtime.feature` - åŠ ç­å·¥æ™‚è¨ˆç®—
3. `approved_hours.feature` - å°ˆæ¡ˆæ ¸å®šå·¥æ™‚è¿½è¹¤èˆ‡æ‰£æŠµ
4. `project_management.feature` - å°ˆæ¡ˆèˆ‡éœ€æ±‚å–®ç®¡ç†
5. `tcs_sync.feature` - TCS æ ¼å¼åŒ–è¼¸å‡º

### ğŸ“Š æ¸¬è©¦æˆæœ
- æ¸¬è©¦æ¡†æ¶é…ç½®å®Œæˆ
- å¯åŸ·è¡Œ `pytest --collect-only` æ”¶é›†æ¸¬è©¦

### ğŸ“ è®Šæ›´æª”æ¡ˆ
- `backend/app/config.py` - æ‡‰ç”¨é…ç½®
- `backend/app/database.py` - è³‡æ–™åº«é€£æ¥è¨­å®š
- `backend/app/main.py` - FastAPI æ‡‰ç”¨å…¥å£
- `backend/tests/conftest.py` - pytest fixtures
- `backend/tests/features/*.feature` - 5 å€‹ Gherkin feature æª”æ¡ˆ
- `backend/requirements.txt` - Python ä¾è³´å¥—ä»¶
- `backend/pytest.ini` - pytest é…ç½®

### ğŸ“ å‚™è¨»
- æ¸¬è©¦é©…å‹•é–‹ç™¼ (TDD) æµç¨‹å·²å»ºç«‹
- è¡Œç‚ºé©…å‹•é–‹ç™¼ (BDD) è¦æ ¼å·²å®šç¾©
- ä¸‹ä¸€æ­¥ï¼šå¯¦ä½œè³‡æ–™åº«æ¨¡å‹

**Git Commit:** `56ede96` - Initialize backend project with TDD/BDD framework

---

## [2025-11-14] - æ–°å¢ TDD/BDD é–‹ç™¼æ¨™æº–èˆ‡ Gherkin æ¥­å‹™é‚è¼¯è¦æ ¼ (v1.5)

### âœ… å·²å®Œæˆ

**é‡å¤§è®Šæ›´ï¼šæ–°å¢é–‹ç™¼è¦ç¯„èˆ‡æ¸¬è©¦é©…å‹•é–‹ç™¼æµç¨‹**

1. **æ¸¬è©¦é©…å‹•é–‹ç™¼ (TDD)**
   - æ‰€æœ‰åŠŸèƒ½é–‹ç™¼å‰å¿…é ˆå…ˆæ’°å¯«æ¸¬è©¦
   - Red-Green-Refactor å¾ªç’°

2. **è¡Œç‚ºé©…å‹•é–‹ç™¼ (BDD)**
   - ä½¿ç”¨ Gherkin èªè¨€æè¿°æ¥­å‹™é‚è¼¯

3. **æ¸¬è©¦æ¡†æ¶è¨­å®š**
   - å¾Œç«¯ï¼špytest + pytest-bdd + pytest-covï¼ˆç›®æ¨™è¦†è“‹ç‡ 80%ï¼‰
   - å‰ç«¯ï¼šVitest + @vue/test-utils

4. **æ¥­å‹™é‚è¼¯è¦æ ¼ï¼ˆGherkinï¼‰**
   - Feature 1: æ¯æ—¥å·¥æ™‚è¨˜éŒ„èˆ‡é©—è­‰ï¼ˆ5 å€‹å ´æ™¯ï¼‰
   - Feature 2: åŠ ç­å·¥æ™‚è¨ˆç®—ï¼ˆ3 å€‹å ´æ™¯ï¼Œå« Scenario Outlineï¼‰
   - Feature 3: å°ˆæ¡ˆæ ¸å®šå·¥æ™‚è¿½è¹¤èˆ‡æ‰£æŠµï¼ˆ5 å€‹å ´æ™¯ï¼‰
   - Feature 4: å°ˆæ¡ˆèˆ‡éœ€æ±‚å–®ç®¡ç†ï¼ˆ4 å€‹å ´æ™¯ï¼‰
   - Feature 5: TCS æ ¼å¼åŒ–è¼¸å‡ºï¼ˆ1 å€‹å ´æ™¯ï¼‰

5. **æ¸¬è©¦ç›®éŒ„çµæ§‹**
   - features/ï¼šGherkin feature æª”æ¡ˆ
   - step_defs/ï¼šStep definitions
   - unit/ï¼šå–®å…ƒæ¸¬è©¦
   - integration/ï¼šæ•´åˆæ¸¬è©¦

6. **æ¸¬è©¦è¦æ±‚**
   - æ‰€æœ‰ API ç«¯é»å¿…é ˆæœ‰æ•´åˆæ¸¬è©¦
   - æ‰€æœ‰æ¥­å‹™é‚è¼¯å¿…é ˆæœ‰ Gherkin è¦æ ¼
   - æ‰€æœ‰ Service å±¤å¿…é ˆæœ‰å–®å…ƒæ¸¬è©¦
   - æ¸¬è©¦è¦†è“‹ç‡é” 80% ä»¥ä¸Š

### ğŸ“ è®Šæ›´æª”æ¡ˆ
- `plan.md` - æ–°å¢é–‹ç™¼è¦ç¯„ç« ç¯€
- `plan.md` - æ–°å¢ Gherkin æ¥­å‹™é‚è¼¯è¦æ ¼ï¼ˆ5 å€‹ Featuresï¼‰

### ğŸ“ å‚™è¨»
- é€™æ˜¯é‡è¦çš„é–‹ç™¼æ¨™æº–è¨­å®šï¼Œæ‰€æœ‰å¾ŒçºŒé–‹ç™¼å¿…é ˆéµå¾ª
- æä¾›æ¸…æ™°çš„ BDD è¦æ ¼ï¼Œä½œç‚ºé–‹ç™¼èˆ‡é©—è­‰ä¾æ“š

---

## æ›´æ—©çš„è®Šæ›´

è©³è¦‹ `plan.md` çš„ã€Œè®Šæ›´æ­·å²ã€ç« ç¯€ï¼š
- 2025-11-14 - v1.4ï¼šæ ¸å®šå·¥æ™‚è¿½è¹¤èˆ‡æ‰£æŠµæ©Ÿåˆ¶
- 2025-11-14 - v1.3ï¼šæ–°å¢éœ€æ±‚å–®ä»£ç¢¼æ¬„ä½
- 2025-11-14 - v1.2ï¼šæ˜ç¢ºåŠ ç­è¨ˆç®—è¦å‰‡
- 2025-11-14 - v1.1ï¼šå·¥ä½œæ—¥èˆ‡æ™‚å€æ¥­å‹™è¦å‰‡
- 2025-11-14 - v1.0ï¼šåˆç‰ˆè¨ˆåŠƒ

---

**ä¸‹æ¬¡æ›´æ–°æé†’ï¼šå®Œæˆæ–°åŠŸèƒ½å¾Œè«‹åœ¨æ­¤æª”æ¡ˆé ‚éƒ¨æ–°å¢è¨˜éŒ„ï¼**
